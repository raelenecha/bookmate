/books:
  get:
    summary: Retrieve all books
    description: Returns the full book catalogue with category details and waitlist count.
    security:
      - bearerAuth: []
    responses:
      200:
        description: Books retrieved successfully
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  _id:
                    type: string
                  title:
                    type: string
                  author:
                    type: string
                  description:
                    type: string
                  image:
                    type: string
                  rating:
                    type: number
                  categoryId:
                    type: object
                  waitlistCount:
                    type: number
      401:
        description: Unauthorized
      500:
        description: Server error

  post:
    summary: Create a new book
    description: Admin-only endpoint to create a new book.
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - title
              - author
              - categoryId
              - image
              - description
            properties:
              title:
                type: string
              author:
                type: string
              categoryId:
                type: string
              image:
                type: string
              description:
                type: string
    responses:
      201:
        description: Book created successfully
      400:
        description: Missing or invalid fields
      403:
        description: Unauthorized (admin only)
      500:
        description: Server error

  put:
    summary: Update a book
    description: Admin-only endpoint to update an existing book.
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - bookId
              - title
              - author
              - categoryId
              - image
              - description
            properties:
              bookId:
                type: string
              title:
                type: string
              author:
                type: string
              categoryId:
                type: string
              image:
                type: string
              description:
                type: string
    responses:
      200:
        description: Book updated successfully
      400:
        description: Missing or invalid fields
      403:
        description: Unauthorized (admin only)
      500:
        description: Server error

/books/top-rated:
  get:
    summary: Retrieve top-rated books
    description: Returns the top 3 books sorted by rating.
    security:
      - bearerAuth: []
    responses:
      200:
        description: Top-rated books retrieved successfully
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  _id:
                    type: string
                  title:
                    type: string
                  author:
                    type: string
                  rating:
                    type: number
                  categoryId:
                    type: object
                  waitlistCount:
                    type: number
      401:
        description: Unauthorized
      500:
        description: Server error

/books/{id}:
  get:
    summary: Retrieve a specific book
    description: Returns detailed information for a specific book, including waitlist info.
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
    responses:
      200:
        description: Book retrieved successfully
        content:
          application/json:
            schema:
              type: object
              properties:
                _id:
                  type: string
                title:
                  type: string
                author:
                  type: string
                description:
                  type: string
                image:
                  type: string
                rating:
                  type: number
                categoryId:
                  type: object
                waitlistCount:
                  type: number
                userInWaitlist:
                  type: object
                  nullable: true
                reservedByOthers:
                  type: boolean
      404:
        description: Book not found
      401:
        description: Unauthorized
      500:
        description: Server error

  delete:
    summary: Delete a book
    description: Admin-only endpoint to delete a book.
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
    responses:
      200:
        description: Book deleted successfully
      403:
        description: Unauthorized (admin only)
      404:
        description: Book not found
      500:
        description: Server error

/categories:
  get:
    summary: Retrieve all book categories
    description: Returns all book categories.
    security:
      - bearerAuth: []
    responses:
      200:
        description: Categories retrieved successfully
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  _id:
                    type: string
                  name:
                    type: string
      401:
        description: Unauthorized
      500:
        description: Server error
